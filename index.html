<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nursing Prometric Test Portal</title>
<style>
body { font-family: Arial, sans-serif; background: #eef5f5; margin:0; padding:0; text-align:center; overflow-x:hidden; }
.header { background: #007b83; color: white; padding: 18px; font-size: 20px; font-weight: bold; position: relative; z-index: 2; }
.landing-image { width: 100%; max-height: 280px; object-fit: cover; border-bottom: 4px solid #007b83; }
.dashboard-background { position:absolute; bottom:0; left:0; width:100%; height:45%; background-image:url('https://raw.githubusercontent.com/gyoutrain-lab/prometric-nursing-test-demo/main/icon17%20(1).jpg'); background-size:cover; background-position:center; opacity:0.15; z-index:-1; }
.container { max-width:480px; margin:20px auto; background:#fff; padding:25px; border-radius:12px; box-shadow:0 0 10px rgba(0,0,0,0.1); position:relative; z-index:1; opacity:0; transform:translateY(15px); transition:all 0.5s ease; }
.container.show { opacity:1; transform:translateY(0); }
input, button { width:100%; padding:12px; margin-top:10px; border-radius:8px; border:1px solid #ccc; font-size:15px; }
button { background:#007b83; color:white; font-weight:bold; border:none; cursor:pointer; transition: background 0.3s; }
button:hover { background:#005f63; }
a.button { display:inline-block; text-decoration:none; padding:12px 20px; background:#007b83; color:white; border-radius:8px; font-weight:bold; margin:8px; transition:background 0.3s, transform 0.2s; }
a.button:hover { background:#005f63; transform:scale(1.03); }
.note { font-size:13px; color:#666; margin-top:10px; }
.success { color:#007b83; font-weight:bold; }
.error { color:#b00020; font-weight:bold; }
.hidden { display:none; }
.qr-wrap { text-align:center; margin-top:12px; }
.qr-wrap img { width:180px; max-width:90%; border:2px solid #007b83; border-radius:12px; }
.social-icons { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); display:flex; gap:20px; justify-content:center; z-index:10; }
.social-icons img { width:34px; height:34px; border-radius:50%; transition:transform 0.3s; }
.social-icons img:hover { transform:scale(1.1); }
</style>
</head>
<body>

<div class="header">ðŸ©º Nursing Prometric Simulation Test</div>

<img class="landing-image" src="https://raw.githubusercontent.com/gyoutrain-lab/prometric-nursing-test-demo/main/icon17%20(1).jpg" alt="Nursing Prometric Demo">

<h2 style="margin-top:20px;">Welcome to Nursing Prometric Simulation Test</h2>
<p>Try the demo first or continue to the full 500-item test to master your skills!</p>

<a class="button" href="https://gyoutrain-lab.github.io/prometric-nursing-test-demo/" target="_blank">ðŸ©º Open Demo Test</a>
<a class="button" id="continueFullTestButton" onclick="showPage('pageRegister')">ðŸ”‘ Continue Full Test</a>

<!-- Step 1 -->
<div class="container hidden" id="pageRegister">
  <h3>Step 1: Registration</h3>
  <input type="text" id="name" placeholder="Full Name">
  <input type="text" id="contact" placeholder="Telephone # or Telegram or Email">
  <input type="password" id="password" placeholder="Create Password">
  <button onclick="registerUser()">Register</button>
  <p class="note">Already registered? Proceed to payment below.</p>
</div>

<!-- Step 2 -->
<div class="container hidden" id="pagePayment">
  <h3>Step 2: Payment Confirmation</h3>
  <input type="text" id="userId" placeholder="Your User ID (from registration)">
  <button onclick="sendPaymentClaim()">Send Payment Claim</button>
  <p class="note">Admin will verify and send unlock code via Telegram/WhatsApp/Email.</p>

  <div class="qr-wrap">
    <p style="font-size:14px; color:#555;">Transfer via DANA â€” <b>IDR 50k</b></p>
    <img src="https://raw.githubusercontent.com/gyoutrain-lab/prometric-nursing-test-demo/main/dana_qr.png" alt="Dana QR">
    <p style="font-size:13px; color:#666; margin-top:5px;">Use your banking app to scan the QR and complete payment</p>
  </div>
</div>

<!-- Step 3 -->
<div class="container hidden" id="pageUnlock">
  <h3>Step 3: Enter Unlock Code</h3>
  <input type="text" id="verifyUserId" placeholder="Your User ID">
  <input type="text" id="unlockCode" placeholder="Enter Unlock Code">
  <button onclick="verifyUnlock()">Verify & Continue</button>
  <p class="note">Unlock code is given by admin via Telegram/WhatsApp/Email.</p>
</div>

<!-- Result -->
<div class="container hidden" id="pageResult">
  <h3 id="resultText">...</h3>
  <button onclick="restart()">âŸ² Restart</button>
</div>

<!-- Social icons -->
<div class="social-icons">
  <a href="tel:+6285399652487" title="Call"><img src="https://cdn-icons-png.flaticon.com/512/597/597177.png"></a>
  <a href="https://wa.me/6285399652487" target="_blank" title="WhatsApp"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png"></a>
  <a href="mailto:gyoutrain@gmail.com" target="_blank" title="Email"><img src="https://cdn-icons-png.flaticon.com/512/732/732200.png"></a>
  <a href="https://web.facebook.com/gyouskill/?_rdc=1&_rdr#" target="_blank" title="Facebook"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png"></a>
  <a href="https://www.instagram.com/etkyogya?igsh=cHEwZ3lycXhqNHc1" target="_blank" title="Instagram"><img src="https://cdn-icons-png.flaticon.com/512/733/733558.png"></a>
</div>

<div class="dashboard-background"></div>

<script>
const BACKEND_URL = "https://script.google.com/macros/s/AKfycbxFhegGJPxJma_ftpW-Y9WBbygLpfMr6WIxtG-kTtZzNQIhuwXEy-rWpYZePQ_Yicje/exec";

/* UI helpers */
function showPage(id){
  document.querySelectorAll('.container').forEach(c=>{
    c.classList.add('hidden'); c.classList.remove('show');
  });
  const el=document.getElementById(id);
  el.classList.remove('hidden');
  setTimeout(()=>el.classList.add('show'),50);
  window.scrollTo({ top:0, behavior:'smooth' });
}
function showMessage(text,success=true){
  const el=document.getElementById("resultText");
  el.textContent=text;
  el.className=success?"success":"error";
  showPage("pageResult");
}
function restart(){ showPage("pageRegister"); }

/* Step 1 - Register User */
async function registerUser(){
  const name=document.getElementById("name").value.trim();
  const contact=document.getElementById("contact").value.trim();
  const password=document.getElementById("password").value.trim();
  if(!name||!contact||!password) return alert("Please fill all fields.");
  const userId="U"+Math.floor(Math.random()*1000000);
  const data={action:"register",name,contact,password,userId};
  try{
    const res=await fetch(BACKEND_URL,{ method:"POST", headers:{"Content-Type":"text/plain;charset=utf-8"}, body:JSON.stringify(data) });
    const json=await res.json();
    if(json.ok){
      alert("âœ… Registered successfully!\nYour User ID: "+userId+"\nUse this ID in Step 2.");
      showPage("pagePayment");
      document.getElementById("userId").value=userId;
      document.getElementById("verifyUserId").value=userId;
    } else showMessage(json.message,false);
  }catch(e){ showMessage("Network error: "+e.message,false); }
}

/* Step 2 - Payment Claim */
async function sendPaymentClaim(){
  const userId=document.getElementById("userId").value.trim();
  if(!userId) return alert("Enter your User ID from registration.");
  const name=document.getElementById("name").value.trim();
  const contact=document.getElementById("contact").value.trim();
  const data={action:"paymentClaim",userId,name,contact};
  try{
    const res=await fetch(BACKEND_URL,{ method:"POST", headers:{"Content-Type":"text/plain;charset=utf-8"}, body:JSON.stringify(data) });
    const json=await res.json();
    if(json.ok){
      alert("ðŸ’° Payment claim sent to admin.\nWait for unlock code via Telegram/WhatsApp/Email.");
      showPage("pageUnlock");
    } else showMessage(json.message,false);
  }catch(e){ showMessage("Network error: "+e.message,false); }
}

/* Step 3 - Verify Unlock Code */
async function verifyUnlock(){
  const userId=document.getElementById("verifyUserId").value.trim();
  const code=document.getElementById("unlockCode").value.trim();
  if(!userId||!code) return alert("Fill both User ID and Unlock Code.");
  const data={action:"verifyCode",userId,code};
  try{
    const res=await fetch(BACKEND_URL,{ method:"POST", headers:{"Content-Type":"text/plain;charset=utf-8"}, body:JSON.stringify(data) });
    const json=await res.json();
    if(json.ok){ showMessage("âœ… Code verified! Starting full test..."); setTimeout(()=>{ window.location.href="fulltest.html"; },2000); }
    else showMessage(json.message,false);
  }catch(e){ showMessage("Network error: "+e.message,false); }
}

/* Hide containers initially */
document.querySelectorAll('.container').forEach(c=>c.classList.add('hidden'));
</script>

</body>
</html>
